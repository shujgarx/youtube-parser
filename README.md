# üìä YouTube Stats CLI (API + Scrape)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ Python –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ YouTube-–≤–∏–¥–µ–æ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

1. —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π **YouTube Data API v3**,
2. —á–µ—Ä–µ–∑ –±—ã—Å—Ç—Ä—ã–π **scrape** –Ω–∞ –±–∞–∑–µ `yt-dlp`.

> –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, CLI-—É—Ç–∏–ª–∏—Ç, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, data-pipelines –∏ –±–æ—Ç–æ–≤.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `videoId` –∏–∑ –ª—é–±—ã—Ö —Ñ–æ—Ä–º URL/ID
* –ü–æ–ª—É—á–µ–Ω–∏–µ: `title`, `channelTitle`, `publishedAt`, `durationSec`, `viewCount`, `likeCount`, `commentCount`, `thumbnails`
* –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã: **`api`** (—Ç–æ—á–Ω–µ–µ, —É—Å—Ç–æ–π—á–∏–≤–µ–µ) –∏ **`scrape`** (–±—ã—Å—Ç—Ä–µ–µ, –±–µ–∑ –∫–ª—é—á–∞)
* –£–¥–æ–±–Ω—ã–π **CLI** –∏ –ø—Ä–æ—Å—Ç—ã–µ **Python-—Ñ—É–Ω–∫—Ü–∏–∏** –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è
* –ú–∏–Ω–∏-–ø–∞—Ä—Å–µ—Ä ISO8601 –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Üí —Å–µ–∫—É–Ω–¥—ã

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: **Python 3.8+**

```bash
#–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade pip
pip install google-api-python-client yt-dlp
```


---

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞ (–¥–ª—è —Ä–µ–∂–∏–º–∞ `api`)

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console.
2. –í–∫–ª—é—á–∏—Ç–µ **YouTube Data API v3**.
3. –°–æ–∑–¥–∞–π—Ç–µ **API Key** –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ.

(–ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç –∏–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API ‚Äî –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ä–µ–∂–∏–º `scrape`.)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (CLI)

–§–∞–π–ª: `youtube_stats.py`

```bash
# –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
python youtube_stats.py --help

# –†–µ–∂–∏–º API (–Ω—É–∂–µ–Ω API_KEY)
python youtube_stats.py api <API_KEY> <VIDEO_URL_OR_ID>

# –†–µ–∂–∏–º Scrape (–±–µ–∑ –∫–ª—é—á–∞)
python youtube_stats.py scrape <VIDEO_URL_OR_ID>
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
python youtube_stats.py api AIza... https://youtu.be/dQw4w9WgXcQ
python youtube_stats.py scrape dQw4w9WgXcQ
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ (—É—Å–µ—á—ë–Ω):**

```json
{
  "videoId": "dQw4w9WgXcQ",
  "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  "title": "Never Gonna Give You Up",
  "publishedAt": "1987-10-25T00:00:00Z", 
  "channelId": "...",
  "channelTitle": "RickAstleyVEVO",
  "durationSec": 213,
  "viewCount": 1234567890,
  "likeCount": 9876543,
  "commentCount": 123456,
  "thumbnails": { "...": "..." }
}
```

---

## üß© –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (Python)

```python
from youtube_stats import get_stats_api, get_stats_scrape

# –ß–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API
data_api = get_stats_api(api_key="AIza...", url_or_id="https://youtu.be/dQw4w9WgXcQ")
print(data_api["title"], data_api["viewCount"])

# –ß–µ—Ä–µ–∑ scrape (yt-dlp)
data_scrape = get_stats_scrape("dQw4w9WgXcQ")
print(data_scrape["durationSec"])
```

---

## üß≠ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π         | `api` (YouTube Data API v3) | `scrape` (yt-dlp)                   |
| ---------------- | --------------------------- | ----------------------------------- |
| –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–ª—é—á   | –î–∞                          | –ù–µ—Ç                                 |
| –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π | –í—ã—Å–æ–∫–∞—è, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Ö–µ–º–∞   | –ú–æ–∂–µ—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å—Å—è –ø–æ –≤–µ—Ä—Å–∏–∏/—Ä–µ–≥–∏–æ–Ω—É |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è      | –ö–≤–æ—Ç—ã Google API            | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–∞ YouTube |
| –°–∫–æ—Ä–æ—Å—Ç—å         | –ë—ã—Å—Ç—Ä–æ                      | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ                        |
| –ü–æ–ª—è `likeCount` | –ú–æ–∂–µ—Ç –±—ã—Ç—å `None`           | –ï—Å—Ç—å, –µ—Å–ª–∏ –ø—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ        |
| –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏  | `publishedAt` –≤ ISO8601     | `upload_date` –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYYMMDD`  |

---

## üìö –ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞

–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –≤ `dict`:

| –ü–æ–ª–µ           | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| -------------- | ------------- | -------------------------------------------- |
| `videoId`      | `str`         | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–µ–æ (11 —Å–∏–º–≤–æ–ª–æ–≤)            |
| `url`          | `str`         | –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π URL –≤–∏–¥–µ–æ                       |
| `title`        | `str`         | –ó–∞–≥–æ–ª–æ–≤–æ–∫                                    |
| `publishedAt`  | `str`         | API: ISO8601, Scrape: `YYYYMMDD`             |
| `channelId`    | `str`         | ID –∫–∞–Ω–∞–ª–∞                                    |
| `channelTitle` | `str`         | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞                              |
| `durationSec`  | `int`/`None`  | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö                      |
| `viewCount`    | `int`/`None`  | –ü—Ä–æ—Å–º–æ—Ç—Ä—ã                                    |
| `likeCount`    | `int`/`None`  | –õ–∞–π–∫–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)                        |
| `commentCount` | `int`/`None`  | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤                      |
| `thumbnails`   | `dict`/`list` | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–Ω–∏–∞—Ç—é—Ä (—Å—Ö–µ–º–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞) |

---

## üß† –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* `extract_video_id(url_or_id)` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç `videoId` –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º URL/ID
* `iso8601_duration_to_seconds(s)` ‚Äî —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä `PnDTnHnMnS` ‚Üí —Å–µ–∫—É–Ω–¥—ã
* `get_stats_api(api_key, url_or_id)` ‚Äî –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `videos().list()` —Å `part=snippet,statistics,contentDetails`
* `get_stats_scrape(url_or_id)` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `yt_dlp.YoutubeDL(...).extract_info(...)`
* CLI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã:

  * `api <API_KEY> <VIDEO_URL_OR_ID>`
  * `scrape <VIDEO_URL_OR_ID>`

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏

* –í —Ä–µ–∂–∏–º–µ `api` **likeCount** –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç YouTube ‚Üí –ø—Ä–∏–¥—ë—Ç `None`.
* –í —Ä–µ–∂–∏–º–µ `scrape` —Å—Ö–µ–º–∞ `thumbnails` –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ `yt-dlp`.
* –í–æ–∑–º–æ–∂–Ω—ã —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–æ–±–∞ —Ä–µ–∂–∏–º–∞).
* –î–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ **–∫–≤–æ—Ç—É** YouTube API –∏ –≤–Ω–µ–¥—Ä—è–π—Ç–µ **caching/backoff**.
* –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/SSL: –≤ `scrape` –≤–∫–ª—é—á—ë–Ω `nocheckcertificate=True` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.

---



–ù–∞—à–ª–∏ –±–∞–≥ –∏–ª–∏ –µ—Å—Ç—å –∏–¥–µ—è —É–ª—É—á—à–µ–Ω–∏—è? –û—Ç–∫—Ä–æ–π—Ç–µ issue ‚Äî —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø–æ—Å–º–æ—Ç—Ä–∏–º!
